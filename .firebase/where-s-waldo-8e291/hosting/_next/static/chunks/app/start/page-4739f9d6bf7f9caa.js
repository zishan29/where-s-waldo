(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[670],{445:function(e,t,a){Promise.resolve().then(a.bind(a,5237))},5237:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return u}});var s=a(7437),n=a(2265),r=e=>{let{characters:t,handleItemClick:a,menuState:n,isBlurred:r}=e,o=t.filter(e=>!r[e.name]),i=(()=>{if(n.isOpen){let e=window.innerWidth,t=window.innerHeight,a={top:n.position.y+window.scrollY,left:n.position.x+window.scrollX};return n.position.x+200>e+window.scrollX-20&&(a.left=Math.max(window.scrollX+20,e-200+window.scrollX-20,n.position.x-200+window.scrollX)),n.position.y+200+window.scrollY>t+window.scrollY-20&&(a.top=Math.max(window.scrollY+20,t-200+window.scrollY-20)),a}return null})(),l=e=>{if(null!==e){if("Zoro"===e)return"https://firebasestorage.googleapis.com/v0/b/where-s-waldo-8e291.appspot.com/o/Zoro.png?alt=media&token=cb7648b6-660d-435b-91d5-0c1e81cba135";if("Law"===e)return"https://firebasestorage.googleapis.com/v0/b/where-s-waldo-8e291.appspot.com/o/Law.png?alt=media&token=ea6e57d5-4e71-41da-8338-47baa3349bd8";if("Hancock"===e)return"https://firebasestorage.googleapis.com/v0/b/where-s-waldo-8e291.appspot.com/o/Hancock.png?alt=media&token=115303f5-7fa6-459b-9b81-864cca8f7160"}};return(0,s.jsx)(s.Fragment,{children:n.isOpen&&(0,s.jsx)("div",{className:"absolute z-10",style:i||void 0,children:(0,s.jsx)("div",{className:"transform rounded-md  bg-stone-900 transition",children:o.map(e=>(0,s.jsxs)("div",{onClick:()=>a(e._id),className:"flex cursor-pointer items-center gap-2 p-4 text-white",children:[(0,s.jsx)("img",{src:l(e.name),alt:"".concat(e.name),width:40,height:40,className:"rounded"}),e.name]},e._id))})})})},o=function(){for(var e,t,a=0,s="",n=arguments.length;a<n;a++)(e=arguments[a])&&(t=function e(t){var a,s,n="";if("string"==typeof t||"number"==typeof t)n+=t;else if("object"==typeof t){if(Array.isArray(t)){var r=t.length;for(a=0;a<r;a++)t[a]&&(s=e(t[a]))&&(n&&(n+=" "),n+=s)}else for(s in t)t[s]&&(n&&(n+=" "),n+=s)}return n}(e))&&(s&&(s+=" "),s+=t);return s};let i=e=>{let{isBlurred:t,src:a,alt:n}=e;return(0,s.jsx)("div",{className:"".concat(t?"brightness-50 filter":""),children:(0,s.jsx)("img",{src:a,alt:n,width:40,height:40,className:"rounded"})})},l=e=>{let{name:t,isBlurred:a}=e;return(0,s.jsx)("div",{className:"".concat(a?"line-through":""),children:t})};function c(e){let{characters:t,isBlurred:a,timer:r,setTimer:c,gameEnded:d}=e;return(0,n.useEffect)(()=>{let e;return d||(e=setInterval(()=>{c(e=>e+10)},10)),()=>clearInterval(e)},[d,c]),(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("nav",{className:o("sticky top-0 z-10 hidden h-20 w-screen items-center bg-stone-900 px-8 text-white md:flex",{"brightness-50":d}),children:[(0,s.jsxs)("a",{href:"/",className:"cursor-pointer rounded-md px-3 py-2 text-2xl font-medium hover:bg-stone-800",children:["Pirate",(0,s.jsx)("span",{className:"text-yellow-400",children:"Hunt"})]}),(0,s.jsxs)("div",{className:"ml-5 flex items-center gap-4 px-2",children:[(0,s.jsx)(i,{src:"https://firebasestorage.googleapis.com/v0/b/where-s-waldo-8e291.appspot.com/o/Zoro.png?alt=media&token=cb7648b6-660d-435b-91d5-0c1e81cba135",alt:"Zoro",isBlurred:a.Zoro}),(0,s.jsx)(l,{name:"Zoro",isBlurred:a.Zoro}),(0,s.jsx)(i,{src:"https://firebasestorage.googleapis.com/v0/b/where-s-waldo-8e291.appspot.com/o/Law.png?alt=media&token=ea6e57d5-4e71-41da-8338-47baa3349bd8",alt:"Law",isBlurred:a.Law}),(0,s.jsx)(l,{name:"Law",isBlurred:a.Law}),(0,s.jsx)(i,{src:"https://firebasestorage.googleapis.com/v0/b/where-s-waldo-8e291.appspot.com/o/Hancock.png?alt=media&token=115303f5-7fa6-459b-9b81-864cca8f7160",alt:"Hancock",isBlurred:a.Hancock}),(0,s.jsx)(l,{name:"Hancock",isBlurred:a.Hancock})]}),t&&(0,s.jsx)("div",{className:"ml-auto",children:"".concat(String(Math.floor(r/6e4)).padStart(2,"0"),":").concat(String(Math.floor(r%6e4/1e3)).padStart(2,"0"),":").concat(String(r%1e3).padStart(3,"0"))})]})})}var d=a(4033);function m(e){let{gameEnded:t,timer:a}=e,[r,o]=(0,n.useState)(""),i=(0,d.useRouter)();async function l(){let e={name:r,time:c()};try{(await fetch("https://wheres-waldo-api.adaptable.app/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok&&i.push("/leaderboard")}catch(e){console.log(e)}}let c=()=>{let e="".concat(String(a%1e3).padStart(3,"0"));return"".concat("".concat(60*Math.floor(a/6e4)+Math.floor(a%6e4/1e3)),".").concat(e)};return(0,s.jsx)(s.Fragment,{children:t&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"fixed inset-0 flex flex-col items-center justify-center",children:(0,s.jsxs)("div",{className:"rounded-md bg-stone-900 p-4",children:[(0,s.jsxs)("div",{className:"text-lg font-medium text-white",children:["You finished in ",c(),"s!"]}),(0,s.jsx)("div",{className:" mb-3 text-sm text-gray-300",children:"Submit your score to the leaderboard"}),(0,s.jsxs)("form",{action:"",className:"flex flex-col gap-2",children:[(0,s.jsx)("label",{htmlFor:"name",className:"block text-gray-300",children:"Username"}),(0,s.jsx)("input",{type:"text",id:"name",className:"h-10 rounded-md border border-stone-300 bg-transparent px-1 text-gray-300",onChange:e=>o(e.target.value)}),(0,s.jsx)("button",{type:"button",className:"h-10 transform self-start rounded-md bg-yellow-400 px-4 font-semibold text-gray-900 transition hover:bg-yellow-300 active:bg-yellow-500",onClick:()=>l(),children:"Submit"})]})]})})})})}function u(){let[e,t]=(0,n.useState)([]),[a,i]=(0,n.useState)(!1),[l,d]=(0,n.useState)({isOpen:!1,position:{x:0,y:0}}),[u,p]=(0,n.useState)(null),[f,h]=(0,n.useState)({}),[g,x]=(0,n.useState)(0),[b,w]=(0,n.useState)(0),[y,j]=(0,n.useState)(!1),[v,k]=(0,n.useState)(null);(0,n.useEffect)(()=>{(async()=>{try{let e=await fetch("https://wheres-waldo-api.adaptable.app/characters");if(e.ok){let a=await e.json();t(a.data)}}catch(e){console.log(e)}})()},[]),(0,n.useEffect)(()=>{if(a){let e=()=>{i(!1),d({isOpen:!1,position:{x:0,y:0}})};return document.addEventListener("click",e),()=>{document.removeEventListener("click",e)}}},[a]),(0,n.useEffect)(()=>{3===g&&j(!0)},[g,j]),(0,n.useEffect)(()=>(y?document.body.classList.add("game-ended"):document.body.classList.remove("game-ended"),()=>{document.body.classList.remove("game-ended")}),[y]);let N=e=>{k(e),setTimeout(()=>{k(null)},3e3)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"flex h-screen w-screen items-center justify-center bg-stone-900 text-center text-white md:hidden",children:"Please play with bigger screen for better experience"}),e&&(0,s.jsx)(c,{characters:e,isBlurred:f,timer:b,setTimer:w,gameEnded:y}),(0,s.jsx)("div",{className:o("relative hidden h-screen items-start justify-center bg-page-yellow md:flex",{"brightness-50":y}),children:(0,s.jsx)("img",{src:"https://firebasestorage.googleapis.com/v0/b/where-s-waldo-8e291.appspot.com/o/onepiece.png?alt=media&token=4574a1c6-1fc7-4d62-aaa8-fa2ffbf87daf",alt:"",width:2e3,height:2e3,className:"cursor-crosshair",onClick:t=>{let a=t.target.getBoundingClientRect(),s=(t.clientX-a.left)/a.width*100,n=(t.clientY-a.top)/a.height*100;e.map(e=>{let{topLeft:t,bottomRight:a}=e.boundingBox;null!==t.x&&null!==t.y&&null!==a.x&&null!==a.y&&s>=t.x&&s<=a.x&&n>=t.y&&n<=a.y&&p(e)}),i(!0),d({isOpen:!0,position:{x:t.clientX,y:t.clientY}})}})}),(0,s.jsx)(r,{characters:e,handleItemClick:function(e){null!==u&&u._id===e?(N("You found ".concat(u.name,"!")),h(e=>({...e,[u.name]:!0})),x(e=>e+1)):N("Try again!"),a&&d({isOpen:!1,position:{x:0,y:0}})},menuState:l,isBlurred:f}),(0,s.jsx)(m,{gameEnded:y,timer:b}),v&&(0,s.jsx)("div",{className:"fixed left-1/2 top-32 z-10 -translate-x-1/2 transform rounded bg-stone-900 px-4 py-2 text-white",children:v})]})}},622:function(e,t,a){"use strict";var s=a(2265),n=Symbol.for("react.element"),r=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,i=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,a){var s,r={},c=null,d=null;for(s in void 0!==a&&(c=""+a),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)o.call(t,s)&&!l.hasOwnProperty(s)&&(r[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps)void 0===r[s]&&(r[s]=t[s]);return{$$typeof:n,type:e,key:c,ref:d,props:r,_owner:i.current}}t.Fragment=r,t.jsx=c,t.jsxs=c},7437:function(e,t,a){"use strict";e.exports=a(622)},4033:function(e,t,a){e.exports=a(5313)}},function(e){e.O(0,[971,938,744],function(){return e(e.s=445)}),_N_E=e.O()}]);